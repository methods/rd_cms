{% extends "static_site/_base.html" %}


{% block main_content %}

  <style>
    .date { color: #6F777B; margin-left: 1em; font-size: 16px; }
    .new { text-transform: uppercase; letter-spacing: 0px; margin-left: 1em; font-size: 16px; font-weight: bold;  }
  </style>

  <main id="content">

    <h1 class="heading-xlarge">Recent updates</h1>

    <p>The following pages have recently been published or updated:</p>

    {% for year, months in months|dictsort(reverse=True) %}
      <h2 class="heading-large">{{ year }}</h2>

      {% for month, pages in months|dictsort(reverse=True) %}

        <h3 class="heading-medium">{{ month.strftime("%B") }}</h3>

        <ol>
          {% for page in pages %}
            <li><a href="{{ url_for('static_site.measure_page',
                                                            topic=page.parent.parent.uri,
                                                            subtopic=page.parent.uri,
                                                            measure=page.uri,
                                                            version='latest') }}">
              {{ page.title }}</a>

              {% if page.version == '1.0' %}
                <strong class="new">new</strong>
              {% endif %}

              <span class="date">{{ page.publication_date | format_friendly_short_date }}</span>
            </li>
          {% endfor %}
          </ol>

      {% endfor %}
    {% endfor %}

  </main>

{% endblock %}

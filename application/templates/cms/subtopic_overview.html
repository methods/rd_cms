{% extends "base.html" %}
{% block title %}Create a new page{% endblock %}
{% block content %}

<div class='grid-row'>
  <nav class="column-full" aria-label="You are here:" role="navigation">
    <ul class="breadcrumbs">
      <li>
        <a href="{{ url_for('cms.index') }}" id="home_breadcrumb">Home</a>
      </li>
      <li>
        <a href="{{ url_for('cms.topic_overview', topic=topic.guid) }}" id="{{ topic.guid }}_breadcrumb">{{ topic.title }}</a>
      </li>
    </ul>
  </nav>
</div>
<div class='grid-row'>
  <div class="column-two-thirds">
    <h1 class='heading-large'>{{ page.title }}</h1>
    <p class="temp">
      <a href="{{ url_for('cms.create_measure_page', topic=topic.guid, subtopic=page.guid) }}">Add a
        measure</a>
      </p>
    </div>
  </div>
  <div class='grid-row'>
    <div class='column-full'>
      {% if children %}
      <table class='table-of-measures'>
        <thead>
          <tr>
            <td>
              Measure name
            </td>
             <td>
              ID
            </td>
          <td>
              Number of versions
          </td>
          </tr>
        </thead>
        <tbody>
          {% for child in children %}
              <tr>
                 {%  if child.number_of_versions() > 1 %}
                      <td>
                          <a href="{{ url_for('cms.list_measure_page_versions', topic=topic.guid, subtopic=page.guid, measure=child.guid) }}">
                              {{ child.title }}
                          </a>
                      </td>
                      <td>
                          <a href="{{ url_for('cms.list_measure_page_versions', topic=topic.guid, subtopic=page.guid, measure=child.guid) }}">
                              {{ child.guid }}
                          </a>
                      </td>
                  {%  else %}
                     <td>
                          <a href="{{ url_for('cms.edit_measure_page', topic=topic.guid, subtopic=page.guid, measure=child.guid, version=child.version) }}">
                              {{ child.title }}
                          </a>
                      </td>
                      <td>
                          <a href="{{ url_for('cms.edit_measure_page', topic=topic.guid, subtopic=page.guid, measure=child.guid, version=child.version) }}">
                              {{ child.guid }}
                          </a>
                      </td>
                  {%  endif %}
                  <td>
                      {{ child.number_of_versions() }}
                  </td>
              </tr>
          {% endfor %}
        </tbody>
      </table>
      {% endif %}
    </div>
  </div>

  {% endblock %}